---
// Define slide interface
interface Slide {
    image: string;
    alt: string;
}

interface HeroContent {
    hero: {
        slides: Slide[];
    };
    [key: string]: any;
}

// Get current locale from URL path or default to 'en'
const currentPathname = Astro.url.pathname;
const currentLocale = currentPathname.startsWith('/pt') ? 'pt' : 'en';
const content: HeroContent = await import(`../content/property/${currentLocale}.json`).then(module => module.default);
const { slides } = content.hero;
---

<div class="hero-slideshow relative w-full h-[75vh] max-h-[750px] overflow-hidden shadow-lifted animate-on-scroll">
    <div class="swiper h-full">
        <div class="swiper-wrapper">
            {slides.map(slide => (
                    <div class="swiper-slide relative">
                        <img src={slide.image} alt={slide.alt} class="w-full h-full object-cover" loading="eager" />
                        <div class="absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-black/10"></div> </div>
            ))}
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev !text-white/70 hover:!text-white"></div>
        <div class="swiper-button-next !text-white/70 hover:!text-white"></div>
    </div>
</div>

<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<script is:inline src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<script is:inline>
function initSwiper() {
    if (typeof Swiper !== 'undefined' && document.querySelector('.hero-slideshow .swiper')) {
    new Swiper('.hero-slideshow .swiper', {
        loop: true,
        autoplay: {
            delay: 6000,
            disableOnInteraction: false,
            },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
            dynamicBullets: true,
            },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
            },
        effect: 'fade',
        fadeEffect: {
            crossFade: true
            },
        speed: 1000, // Slower, smoother transition
        keyboard: {
        enabled: true,
        },
        });
    }
    }
document.addEventListener('astro:page-load', initSwiper);
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initSwiper);
    } else {
    initSwiper();
    }
</script>

<style>
.hero-slideshow .swiper-button-next,
.hero-slideshow .swiper-button-prev {
    @apply bg-black bg-opacity-10 hover:bg-opacity-30 transition-all duration-300 ease-custom-ease rounded-full w-12 h-12 backdrop-blur-sm;
    }
.hero-slideshow .swiper-button-next::after,
.hero-slideshow .swiper-button-prev::after {
    @apply text-xl;
    }
.hero-slideshow .swiper-pagination .swiper-pagination-bullet {
    @apply bg-white bg-opacity-50 w-3 h-3 transition-all duration-300 ease-custom-ease mx-1; /* Added margin */
    }
.hero-slideshow .swiper-pagination .swiper-pagination-bullet-active {
    @apply bg-gradient-to-r from-brand-secondary to-brand-accent scale-125 w-5; /* Active bullet more distinct */
    }
</style>
